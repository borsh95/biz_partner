/*==================== MOLECULES ====================*/
/* field */
.field {
    $this: &;

    position: relative;
    width: 100%;

    &__separator {
        flex-shrink: 0;
        margin-right: 8px;
        margin-left: 8px;
        width: 8px;
        height: 1px;
        background-color: color('border-1');
    }

	&:hover,
	&.focussed,
	&.filled {
		#{$this}__label {
			padding-top: 7px;
			font-size: 12px;
		}
	}

	&:hover {
		.select {
			&__content {
				border-color: var(--color-base);
			}
		}
	}

    &__label {
        position: absolute;
		left: 0;
		top: 0;
        display: flex;
        align-items: center;
        padding-top: em(16, 14);
		padding-right: 35px;
		font-size: 14px;
		line-height: 1.2;
        color: var(--color-txt-2);
        transition: all $duration, padding-left 0s;
        pointer-events: none;
        z-index: 1;
    }

    &__content {
        position: relative;
        display: flex; // нужен для options маски телефона
        flex-direction: column; // нужен для options маски телефона
    }

    &__btn {
        &s {
            position: absolute;
            top: 50%;
            right: 0;
            transform: translateY(-50%);
        }

        &-pass {
            .btn {
                &__icon {
                    fill: color('txt-2');
                }
            }

            &.active {
                .btn {
                    &__icon {
                        fill: color('base-1');
                    }
                }
            }
        }
    }

    &__status {
        display: none;
        margin-top: 8px;

        [class*="field--status"] & {
            display: block;
        }
    }

    .input__element,
    .textarea__element {
        @mixin fieldBorderBottom($colors...) {
            
        }

		@each $status in ('red', 'orange', 'green') {
			.field--status_#{$status} & {
				border-color: var(--color-#{$status});
			}
		}
    }

    &__message {
        margin-top: 4px;

        &-text {
            color: color('txt-2');
        }
    }

    .input,
    .textarea,
    .select {
        width: 100%;
    }

	.select {
		&__label {
			pointer-events: none;
			opacity: 0;
			visibility: hidden;
		}
	}

    &--style {
        &_sms {
            padding-left: 0;
            padding-right: 0;
            width: auto;

            input {
                padding-right: 0;
                padding-left: 0;
                width: 32px;
                text-align: center !important;
            }

            #{$this} {
                &__field {
                    > * {
                        margin-right: 8px;

                        &:last-child {
                            margin-right: 0;
                        }
                    }
                }
            }
        }
    }
}

.field-block {
	&__list {
		@include row;

		> * {
			@include col;
			@include widthCol(12);
		}
	}
}

/* map */
.map {
	position: relative;
	overflow: hidden;

	> * {
		position: absolute !important;
		left: 0;
		top: 0;
		width: 100%;
		height: 100%;
	}

	&::before {
		pointer-events: none;
		content: "";
		display: block;
		width: 100%;
		padding-bottom: 300px;
	}
}

/* menu */
.menu {
	$this: &;

	position: relative;
	font-family: var(--fm-2);
	
	&__list,
	&__submenu-list {
		padding-left: 0;
	}

	&__submenu {
		color: var(--color-text);
	}

	&__list {
		> #{$this}__item > #{$this}__link {
			text-transform: uppercase;	
		}
	}

	&__item {
		list-style-type: none;

		&:last-child {
			margin-bottom: 0;
		}

		&-arr {
			display: block;
			
			svg {
				width: 15px;
				height: 15px;
				fill: currentColor
			}
		}

		&-toggle {
			--hamburger-bgc-line: #fff;

			display: none;
			order: -1;
			margin-top: -0.25em;
			margin-right: 5px;

			#{$this}__link:not([href]) ~ & {
				position: static;

				&::before {
					left: 0;
					top: 0;
					width: 100%;
					height: 100%;
					transform: none;
				}
			}
		}

		&--hang {
			display: flex;
			align-items: center;
		}
	}

	&__link {
		display: inline-flex;
		width: 100%;
		transition: color $duration;

		&:hover {
			text-decoration: none;
		}

		&-arr {
			display: none;
			align-self: center;
			margin-left: 0.5em;
			width: em(14, 20);
			height: em(8, 20);
			fill: var(--color-base);
			color: var(--color-base);
		}
	}

	@include media(md, min-width) {
		&__list {
			display: flex;
			align-items: center;
			flex-wrap: wrap;
			row-gap: 0.5em;

			> #{$this}__item {
				margin: 0;
				margin-right: 20px;

				&:last-child {
					margin-right: 0;
				}

				&:hover {
					> #{$this}__link {
						#{$this}__link-arr {
							transform: rotate(180deg);
						}
					}
				}

				> #{$this}__link {
					position: relative;
					transition: all 0.25s;

					&[href].active,
					&[href]:hover {
						&::before {
							opacity: 1;
							transform: scaleX(1);
							transform-origin: left center;
							transition: transform $duration, opacity 0s;
						}
					}

					&:before {
						content: "";
						position: absolute;
						top: 100%;
						left: 0;
						display: block;
						width: 100%;
						height: 1px;
						transform-origin: right center;
						background-color: currentColor;
						opacity: 0;
						transform: scaleX(0);
						transition: transform $duration, opacity 0s $duration;
					}
				}

				> #{$this}__submenu {
					top: calc(100% + 15px);
					left: 0;
					right: auto;
					padding: 14px 0;
				}
			}
		}

		&__submenu {
			position: absolute;
			left: 100%;
			top: 0;
			min-width: 300px;
			max-width: 340px;
			background-color: var(--color-bg-card);
			opacity: 0;
			visibility: hidden;
			box-shadow: 0px 0px 50px rgba(0, 0, 0, 0.1);
			transition: opacity $duration, visibility 0s $duration;

			&:before {
				content: "";
				position: absolute;
				bottom: 100%;
				left: 0;
				display: block;
				height: 15px;
				width: 100%;
			}
			
			#{$this}__link {
				display: flex;
				justify-content: space-between;
				padding: 12px 20px 12px 20px;
				width: 100%;

				&[href]:hover {
					text-decoration: underline;
				}

				&:not([href]) {
					cursor: text;
					text-decoration: underline;
					opacity: 0.7;
				}

				&-arr {
					margin-left: 20px;

					> * {
						transform: rotate(-90deg);
					}
				}
			}

			&--left {
				left: 30%;
				z-index: $z-index-inc;
			}
		}

		&__item {
			position: relative;
			margin-bottom: 0;

			&.open,
			&:hover {
				> #{$this}__submenu {
					opacity: 1;
					visibility: visible;
					transition: opacity $duration;
				}
			}

			&-toggle {
				display: block;
			}

			&-arr {
				display: none;
			}

			#{$this}__list > &--hang {	
				> #{$this}__link:not([href]) {
					opacity: 1;
				}
			}
		}

		&__link {
			&-arr {
				display: block;
			}
		}
	}

	@include media(md) {
		text-transform: uppercase;

		&__list {
			display: flex;
			flex-direction: column;
			align-items: flex-start;

			> * {
				margin-bottom: 20px;

				&:last-child {
					margin-bottom: 0;
				}
			}
		}

		&__item,
		&__link {
			width: 100%;
		}

		&__item {
			&-arr {
				display: none;
			}
		}

		&__link[href].active,
		&__link[href]:hover {
			text-decoration: underline;
		}

		&__item:not(.menu__item--hang).active > &__link {
			color: var(--color-text-2)
		}
	}
}

/* card */
.card {
	padding: var(--card-p-m);
	background-color: var(--color-bg-card);

	&,
	&__content {
		display: flex;
		flex-direction: column;
	}

	&__content {
		flex-grow: 1;
	}

	&--style {
		&_default {
			border: 1px solid var(--color-border);
		}

		&_2 {
			box-shadow: 0px 0px 20px rgba(0, 0, 0, 0.1);
		}
	}
}

/* card section */
.card-section {
	$this: &;

	--card-section-padding-x: #{rem(48)};
	--card-section-padding-y: #{rem(40)};
	
	position: relative;
	padding: var(--card-section-padding-y) var(--card-section-padding-x);
	background-color: var(--color-bg-card);
	border-radius: rem(15);
	box-shadow: var(--bsh-m);
}

.card-service {
	$this: &;

	position: relative;
	font-weight: 700;
	font-size: rem(24);
	color: var(--color-gray-lighter);

	@include media(xl, xxl) {
		font-size: rubberSize(20, 24, $lg, $xxl);
	}

	&:hover {
		#{$this}__bg {
			&::before {
				background-color: color('base', 0.63);
			}
		}
	}
	
	&__bg {
		pointer-events: none;

		&,
		&:before {
			position: absolute;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
		}

		&::before {
			content: "";
			background-color: color('black', 0.23);
			transition: background-color $duration;
		}

		img {
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	&__content {
		position: relative;
		display: flex;
		flex-direction: column;
		justify-content: flex-end;
		padding: em(36, 24) em(30, 24);
		min-height: em(570, 24);
	}

	&__title {
		font-size: em(36, 24);
		line-height: calc(44/36);
	}

	&__nav {
		align-self: flex-start;

		&-list {
			padding: 0;	
			padding-top: 15px;	
		}

		&-item {
			list-style-type: none;
			margin-bottom: 10px;
			
			&:last-child {
				margin-bottom: 0;
			}

			a {
				display: flex;

				&[href]:hover {
					color: inherit;
					text-decoration: none;

					.icon {
						opacity: 1;
						transform: translateX(8px);
					}
				}

				.icon {
					align-self: center;
					margin-left: em(11, 24);
					width: em(18, 24);
					height: em(24, 24);
					color: currentColor;
					fill: currentColor;
					opacity: 0;
					transition-property: transform, opacity;
					transition-duration: $duration;
				}
			}
		}
	}
	
	@include media(md, min-width) {
		&:hover {
			#{$this}__nav {
				height: var(--height);
				opacity: 1;
				pointer-events: all;
				transform: translateY(0px);
				transition: height 0.3s, opacity 0.3s 0.15s, transform 0.3s 0.15s;
			}
		}

		&__nav {
			height: 0;
			opacity: 0;
			pointer-events: none;
			transform: translateY(20px);
			transition: height 0.3s, opacity 0.3s, transform 0.3s;
		}
	}

	@include media(xl) {
		&__content {
			min-height: rem(470)
		}
	}

	@include media(md) {
		&.swiper-slide-active {
			box-shadow: 0px 8px 17px rgba(58, 116, 190, 0.22);

			#{$this}__bg {
				&::before {
					background-color: color('base', 0.63);
				}
			}
		}
	}

	@include media(sm) {
		font-size: 18px;

		&__content {
			min-height: 404px;
		}
	}
}

.card-record {
	$this: &;

	position: relative;
	font-size: 18px;

	&__img {
		position: relative;
		margin-bottom: 10px;
		overflow: hidden;

		&::before {
			content: "";
			display: block;
			width: 100%;
			padding-bottom: pr(191, 379);
		}

		img {
			position: absolute;
			left: 0;
			top: 0;
			width: 100%;
			height: 100%;
			object-fit: cover;
		}
	}

	&__content {
		> * {
			margin-bottom: 8px;

			&:last-child {
				margin-bottom: 0;
			}
		}
	}

	&__title {
		margin-top: 0;
		line-height: calc(46/32);
		font-size: var(--fz-h4);

		[href] {
			&:hover {
				color: var(--color-base);
				text-decoration: underline;
			}

			&::before {
				content: "";
				position: absolute;
				left: 0;
				top: 0;
				width: 100%;
				height: 100%;
			}
		}
	}

	&__text {
		line-height: calc(36/24);
	}

	&--size {
		@include media(md, min-width) {
			&_xl\@md {
				font-size: 24px;
	
				#{$this}__img {
					margin-bottom: em(20, 24);
				}
	
				#{$this}__content {
					> * {
						margin-bottom: em(20, 24)
					}
				}
	
				#{$this}__title {
					font-size: var(--fz-h3);
				}

				@include media(xl) {
					font-size: 20px;
				}
			}
		}
	}

	
}

.card-record-layout {
	@include media(md, min-width) {
		&,
		&.swiper-wrapper {
			display: grid;
			grid-template-columns: repeat(3, 1fr);
			column-gap: 32px;
			row-gap: 30px;
		}

		.card-record--size_xl\@md {
			grid-column: 1 / 3;
			grid-row: 1 / 3;
		}
	}

	@include media(md) {
		[class*="card-record--size_"] {
			.card-record__title {
				margin-bottom: 0;
				@include line_clamp(3);
			}

			.card-record__text {
				display: none;
			}
		}
	}
}

.contacts {
	display: flex;
	flex-direction: column;
	align-items: flex-start;

	&__tel,
	&__link {
		display: block;
	}

	> * {
		margin-bottom: 8px;

		&:last-child {
			margin-bottom: 0;
		}
	}

	&__tel {
		font: 500 20px var(--fm-1); 
	}

	@include media(sm) {
		&__tel {
			font-size: 18px;
		}
	}
}

.form-subscription {
	&__content {
		@include row;
		--offset-x: 22px;
		--offset-y: 20px;

		flex-wrap: nowrap;
		align-items: flex-start;

		> * {
			@include col;
		}
	}

	&__fields {
		max-width: 385px;
		width: calc(100% - var(--offset-x));

		.field-block__list {
			--offset-y: 14px;
		}
	}

	@include media(sm) {
		&__content {
			flex-direction: column;
			align-items: stretch;
		}
	}
}

.half-b {
	position: relative;

	&__row {
		@include row;
		align-items: center;
	
		--offset-x: 0px;
		--offset-y: 0px;

		> * {
			@include col;
			@include widthCol(6);
		}
	}

	&__content {
		margin-left: auto !important;
		padding: 0 0 0 rem(79);

		&::before {
			content: "";
			position: absolute;
			right: 0;
			top: 0;
			bottom: 0;
			z-index: -1;
			display: block;
			width: 9999px;
			background-color: #F5F3F1;
		}	
	}

	@include media(md, min-width) {
		&__row {
			min-height: 600px;
		}

		&__img {
			position: absolute;
			right: 50%;
			top: 50%;
			width: 50vw;
			max-width: calc(1920px / 2);
			transform: translateY(-50%);
			
			img {
				width: 100%;
				height: 100%;
				object-fit: cover;
			}
		}
	}

	@include media(xl) {
		&__content {
			padding-left: 50px;
		}	
	}
	@include media(md) {
		&__row {
			> * {
				@include widthCol(12);
			}
		}

		&__content {
			padding-left: 0;
		}

		&__img {
			position: relative;
			left: calc(-1 * var(--container-offset-x));
			max-width: calc(100% - var(--container-offset-x) * 2);
		}
	}

	@include media(sm) {
		&__info {
			padding: 18px 0 42px;
		}
	}
}

.title-block {
	&__list {
		display: flex;
		align-items: center;
		justify-content: space-between;

		> * {
			margin-right: rem(32);

			&:last-child {
				margin-right: 0;
			}
		}
	}
}

/* tabs */
.tabs {
	max-width: 100%;
    position: relative;

	&::before {
		content: "";
		position: absolute;
		left: 0;
		bottom: 0;
		width: 100%;
		height: 1px;
		background-color: var(--color-border);
	}

	&__list {
		@include row;
		--offset-x: 6px;
		--offset-y: 0px;

		> * {
			@include col;
		}
	}
}

.sketch {
	position: relative;
	overflow: hidden;

	&__bg {
		&--oblique-filling {
			&::before {
				content: "";
				position: absolute;
				right: 44%;
				top: 0;
				height: 100%;
				width: 200vw;
				background-color: var(--color-bg-4);
				transform: skewX(-38deg);
			}

		}

		&--abstraction {
			@at-root [class*="sketch__bg--abstraction"] {
				position: absolute;
			}

			&-1 {
				right: 0;
				top: 50%;
				max-width: 55vw;
				transform: translate(36%, -50%);

				@include media(sm) {
					top: 0;				
					max-width: 90vw;
					transform: translate(5%, 0);
				}
			}
		}
	}
}